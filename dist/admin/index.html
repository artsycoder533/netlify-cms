<!DOCTYPE html>
<html>
  <head>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", (user) => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
  </head>
  <body>
    <script src="https://cdn.netlify.com/git-gateway.js"></script>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <div id="netlify-cms"></div>
    <script>
      window.CMS_MANUAL_INIT = true;
      import("/admin/index.js").then((module) => {
        module.init({
          config: {
            backend: {
              name: "git-gateway",
              branch: "main",
            },
            media_folder: "dist/images",
            public_folder: "/images",
            collections: [
              {
                name: "pages",
                label: "Pages",
                folder: "pages",
                create: true,
                slug: "{{slug}}",
                fields: [
                  { name: "heading", label: "Heading", widget: "string" },
                  { name: "subheading", label: "Subheading", widget: "string"},
                  {name: "background_image", label: "Background Image", widget: "image"}
                ],
              },
            ],
          },
        });
      });
    </script>
  </body>
</html>
