<!DOCTYPE html>
<html>
  <head>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", (user) => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
  </head>
  <body>
    <script src="https://cdn.netlify.com/git-gateway.js"></script>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <div id="netlify-cms"></div>
    <script>
      window.CMS_MANUAL_INIT = true;
      import("/admin/index.js").then((module) => {
        module.init({
          config: {
            backend: {
              name: "git-gateway",
              branch: "main",
            },
            media_folder: "static/img",
            public_folder: "/img",
            collections: [
              {
                name: "pages",
                label: "Pages",
                folder: "pages",
                create: true,
                slug: "{{slug}}",
                fields: [
                  { label: "Title", name: "title", widget: "string" },
                  { label: "Body", name: "body", widget: "markdown" },
                ],
              },
            ],
          },
        });
      });
    </script>
  </body>
</html>
